"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Export = (bottles) => {
    const drawPic = (context, url, quality) => {
        let x = quality[0];
        let y = quality[1];
        let width = quality[2];
        let height = quality[3];
        wx.getImageInfo({
            src: url,
            success: function (res) {
                context.drawImage(res.path, x, y, width, height);
                context.draw(true);
            },
            fail: function (res) {
                console.log(res.errMsg);
            }
        });
    };
    const drawText = (context, text, quality) => {
        let x = quality[0];
        let y = quality[1];
        let width = quality[2];
        context.setFontSize(30);
        context.fillText(text, x, y, width);
    };
    const drawAll = (context, bottleUrl) => {
        const bottleHeight = 300;
        const bottleWidth = 200;
        const titleHeight = 100;
        const picWidth = 100;
        context.rect(0, 0, 1300, 4000);
        context.setFillStyle("white");
        context.fill();
        context.draw();
        context.setFillStyle("black");
        let bottleIndex = 1;
        for (let y = 1; y <= 6; ++y) {
            for (let x = 1; x <= 5; ++x) {
                for (let i = 1; i <= bottles[bottleIndex].full; ++i) {
                    switch (i) {
                        case 1: {
                            drawPic(context, bottles[bottleIndex].path, [50 * x + bottleWidth * (x - 1) + 85, (bottleHeight + 100) * (y - 1) + titleHeight + 195, picWidth, picWidth]);
                            break;
                        }
                        case 2: {
                            drawPic(context, bottles[bottleIndex].path, [50 * x + bottleWidth * (x - 1) + 5, (bottleHeight + 100) * (y - 1) + titleHeight + 150, picWidth, picWidth]);
                            break;
                        }
                        case 3: {
                            drawPic(context, bottles[bottleIndex].path, [50 * x + bottleWidth * (x - 1) + 85, (bottleHeight + 100) * (y - 1) + titleHeight + 95, picWidth, picWidth]);
                            break;
                        }
                        case 4: {
                            drawPic(context, bottles[bottleIndex].path, [50 * x + bottleWidth * (x - 1) + 5, (bottleHeight + 100) * (y - 1) + titleHeight + 50, picWidth, picWidth]);
                            break;
                        }
                        case 5: {
                            drawPic(context, bottles[bottleIndex].path, [50 * x + bottleWidth * (x - 1) + 85, (bottleHeight + 100) * (y - 1) + titleHeight - 5, picWidth, picWidth]);
                            break;
                        }
                    }
                }
                drawPic(context, bottleUrl, [50 * x + bottleWidth * (x - 1), (bottleHeight + 100) * (y - 1) + titleHeight, bottleWidth, bottleHeight]);
                drawText(context, bottles[bottleIndex].name, [50 * x + bottleWidth * (x - 1) + 40, (bottleHeight + 50) * y + 50 * (y - 1) + titleHeight, 150]);
                bottleIndex++;
            }
        }
    };
    const context = wx.createCanvasContext('bottleImg');
    const bottleUrl = "cloud://dxzsbottle-iu8cx.6478-dxzsbottle-iu8cx-1301327315/bottle.png";
    wx.cloud.downloadFile({
        fileID: bottleUrl,
        success: res => {
            drawAll(context, res.tempFilePath);
        }
    });
    context.draw(true, function () {
        setTimeout(function () {
            wx.canvasToTempFilePath({
                canvasId: "bottleImg",
                quality: 1,
                success(res) {
                    wx.saveImageToPhotosAlbum({
                        filePath: res.tempFilePath,
                        success() {
                            console.log("成功保存");
                        },
                        fail(res) {
                            console.log(res.errMsg);
                        }
                    });
                }
            });
        }, 10000);
    });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhwb3J0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZXhwb3J0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQWEsUUFBQSxNQUFNLEdBQUMsQ0FBQyxPQUFpQixFQUFRLEVBQUU7SUFDOUMsTUFBTSxPQUFPLEdBQUcsQ0FBQyxPQUF3QyxFQUFFLEdBQVcsRUFBRSxPQUFpQixFQUFRLEVBQUU7UUFDakcsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ2xCLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUNsQixJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDdEIsSUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ3ZCLEVBQUUsQ0FBQyxZQUFZLENBQUM7WUFDZCxHQUFHLEVBQUUsR0FBRztZQUNSLE9BQU8sRUFBRSxVQUFVLEdBQUc7Z0JBQ3BCLE9BQU8sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQTtnQkFDaEQsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUNwQixDQUFDO1lBQ0QsSUFBSSxFQUFFLFVBQVUsR0FBRztnQkFDakIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUE7WUFDekIsQ0FBQztTQUNGLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQTtJQUNELE1BQU0sUUFBUSxHQUFHLENBQUMsT0FBd0MsRUFBRSxJQUFZLEVBQUUsT0FBaUIsRUFBUSxFQUFFO1FBQ25HLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUNsQixJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDbEIsSUFBSSxLQUFLLEdBQUcsT0FBTyxD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QUMsR0FBQyxXQUFXLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQTtnQkFDeEgsV0FBVyxFQUFFLENBQUE7YUFDZDtTQUNGO0lBQ0gsQ0FBQyxDQUFBO0lBRUQsTUFBTSxPQUFPLEdBQUcsRUFBRSxDQUFDLG1CQUFtQixDQUFDLFdBQVcsQ0FBQyxDQUFBO0lBQ25ELE1BQU0sU0FBUyxHQUFHLHNFQUFzRSxDQUFBO0lBQ3hGLEVBQUUsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDO1FBQ3BCLE1BQU0sRUFBRSxTQUFTO1FBQ2pCLE9BQU8sRUFBRSxHQUFHLENBQUMsRUFBRTtZQUNiLE9BQU8sQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFBO1FBQ3BDLENBQUM7S0FDRixDQUFDLENBQUE7SUFFRixPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRTtRQUNqQixVQUFVLENBQUM7WUFDVCxFQUFFLENBQUMsb0JBQW9CLENBQUM7Z0JBQ3RCLFFBQVEsRUFBRSxXQUFXO2dCQUNyQixPQUFPLEVBQUUsQ0FBQztnQkFDVixPQUFPLENBQUMsR0FBRztvQkFDVCxFQUFFLENBQUMsc0JBQXNCLENBQUM7d0JBQ3hCLFFBQVEsRUFBRSxHQUFHLENBQUMsWUFBWTt3QkFDMUIsT0FBTzs0QkFDTCxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFBO3dCQUNyQixDQUFDO3dCQUNELElBQUksQ0FBQyxHQUFHOzRCQUNOLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFBO3dCQUN6QixDQUFDO3FCQUNGLENBQUMsQ0FBQTtnQkFDSixDQUFDO2FBQ0YsQ0FBQyxDQUFBO1FBQ0osQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBQ1gsQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgRXhwb3J0PShib3R0bGVzOiBCb3R0bGVbXSk6IHZvaWQgPT57XHJcbiAgY29uc3QgZHJhd1BpYyA9IChjb250ZXh0OiBXZWNoYXRNaW5pcHJvZ3JhbS5DYW52YXNDb250ZXh0LCB1cmw6IHN0cmluZywgcXVhbGl0eTogbnVtYmVyW10pOiB2b2lkID0+e1xyXG4gICAgbGV0IHggPSBxdWFsaXR5WzBdXHJcbiAgICBsZXQgeSA9IHF1YWxpdHlbMV1cclxuICAgIGxldCB3aWR0aCA9IHF1YWxpdHlbMl1cclxuICAgIGxldCBoZWlnaHQgPSBxdWFsaXR5WzNdXHJcbiAgICB3eC5nZXRJbWFnZUluZm8oe1xyXG4gICAgICBzcmM6IHVybCxcclxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKHJlcy5wYXRoLCB4LCB5LCB3aWR0aCwgaGVpZ2h0KVxyXG4gICAgICAgIGNvbnRleHQuZHJhdyh0cnVlKVxyXG4gICAgICB9LFxyXG4gICAgICBmYWlsOiBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzLmVyck1zZylcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcbiAgY29uc3QgZHJhd1RleHQgPSAoY29udGV4dDogV2VjaGF0TWluaXByb2dyYW0uQ2FudmFzQ29udGV4dCwgdGV4dDogc3RyaW5nLCBxdWFsaXR5OiBudW1iZXJbXSk6IHZvaWQgPT57XHJcbiAgICBsZXQgeCA9IHF1YWxpdHlbMF1cclxuICAgIGxldCB5ID0gcXVhbGl0eVsxXVxyXG4gICAgbGV0IHdpZHRoID0gcXVhbGl0eVsyXVxyXG4gICAgY29udGV4dC5zZXRGb250U2l6ZSgzMClcclxuICAgIGNvbnRleHQuZmlsbFRleHQodGV4dCwgeCwgeSwgd2lkdGgpXHJcbiAgfVxyXG4gIGNvbnN0IGRyYXdBbGwgPSAoY29udGV4dDogV2VjaGF0TWluaXByb2dyYW0uQ2FudmFzQ29udGV4dCwgYm90dGxlVXJsOiBzdHJpbmcpOiB2b2lkID0+e1xyXG4gICAgY29uc3QgYm90dGxlSGVpZ2h0ID0gMzAwXHJcbiAgICBjb25zdCBib3R0bGVXaWR0aCA9IDIwMFxyXG4gICAgY29uc3QgdGl0bGVIZWlnaHQgPSAxMDBcclxuICAgIGNvbnN0IHBpY1dpZHRoID0gMTAwXHJcblxyXG4gICAgLy/nlLvog4zmma9cclxuICAgIGNvbnRleHQucmVjdCgwLCAwLCAxMzAwLCA0MDAwKVxyXG4gICAgY29udGV4dC5zZXRGaWxsU3R5bGUoXCJ3aGl0ZVwiKVxyXG4gICAgY29udGV4dC5maWxsKClcclxuICAgIGNvbnRleHQuZHJhdygpXHJcbiAgICBjb250ZXh0LnNldEZpbGxTdHlsZShcImJsYWNrXCIpXHJcbiAgICBcclxuICAgIGxldCBib3R0bGVJbmRleCA9IDFcclxuICAgIGZvcihsZXQgeSA9IDE7IHkgPD0gNjsgKyt5KXtcclxuICAgICAgZm9yIChsZXQgeCA9IDE7IHggPD0gNTsgKyt4KSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gYm90dGxlc1tib3R0bGVJbmRleF0uZnVsbDsgKytpKXtcclxuICAgICAgICAgIHN3aXRjaChpKXtcclxuICAgICAgICAgICAgY2FzZSAxOntcclxuICAgICAgICAgICAgICBkcmF3UGljKGNvbnRleHQsIGJvdHRsZXNbYm90dGxlSW5kZXhdLnBhdGgsIFs1MCAqIHggKyBib3R0bGVXaWR0aCAqICh4IC0gMSkgKyA4NSwgKGJvdHRsZUhlaWdodCArIDEwMCkgKiAoeSAtIDEpICsgdGl0bGVIZWlnaHQgKyAxOTUsIHBpY1dpZHRoLCBwaWNXaWR0aF0pXHJcbiAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIDI6e1xyXG4gICAgICAgICAgICAgIGRyYXdQaWMoY29udGV4dCwgYm90dGxlc1tib3R0bGVJbmRleF0ucGF0aCwgWzUwICogeCArIGJvdHRsZVdpZHRoICogKHggLSAxKSArIDUsIChib3R0bGVIZWlnaHQgKyAxMDApICogKHkgLSAxKSArIHRpdGxlSGVpZ2h0ICsgMTUwLCBwaWNXaWR0aCwgcGljV2lkdGhdKVxyXG4gICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSAzOntcclxuICAgICAgICAgICAgICBkcmF3UGljKGNvbnRleHQsIGJvdHRsZXNbYm90dGxlSW5kZXhdLnBhdGgsIFs1MCAqIHggKyBib3R0bGVXaWR0aCAqICh4IC0gMSkgKyA4NSwgKGJvdHRsZUhlaWdodCArIDEwMCkgKiAoeSAtIDEpICsgdGl0bGVIZWlnaHQgKyA5NSwgcGljV2lkdGgsIHBpY1dpZHRoXSlcclxuICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgNDp7XHJcbiAgICAgICAgICAgICAgZHJhd1BpYyhjb250ZXh0LCBib3R0bGVzW2JvdHRsZUluZGV4XS5wYXRoLCBbNTAgKiB4ICsgYm90dGxlV2lkdGggKiAoeCAtIDEpICsgNSwgKGJvdHRsZUhlaWdodCArIDEwMCkgKiAoeSAtIDEpICsgdGl0bGVIZWlnaHQgKyA1MCwgcGljV2lkdGgsIHBpY1dpZHRoXSlcclxuICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgNToge1xyXG4gICAgICAgICAgICAgIGRyYXdQaWMoY29udGV4dCwgYm90dGxlc1tib3R0bGVJbmRleF0ucGF0aCwgWzUwICogeCArIGJvdHRsZVdpZHRoICogKHggLSAxKSArIDg1LCAoYm90dGxlSGVpZ2h0ICsgMTAwKSAqICh5IC0gMSkgKyB0aXRsZUhlaWdodC01LCBwaWNXaWR0aCwgcGljV2lkdGhdKVxyXG4gICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy/nlLvnk7blrZBcclxuICAgICAgICBkcmF3UGljKGNvbnRleHQsIGJvdHRsZVVybCwgWzUwICogeCArIGJvdHRsZVdpZHRoICogKHggLSAxKSwgKGJvdHRsZUhlaWdodCArIDEwMCkgKiAoeSAtIDEpICsgdGl0bGVIZWlnaHQsIGJvdHRsZVdpZHRoLCBib3R0bGVIZWlnaHRdKVxyXG4gICAgICAgIGRyYXdUZXh0KGNvbnRleHQsIGJvdHRsZXNbYm90dGxlSW5kZXhdLm5hbWUsIFs1MCp4K2JvdHRsZVdpZHRoKih4LTEpKzQwLCAoYm90dGxlSGVpZ2h0KzUwKSp5KzUwKih5LTEpK3RpdGxlSGVpZ2h0LCAxNTBdKVxyXG4gICAgICAgIGJvdHRsZUluZGV4KytcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3QgY29udGV4dCA9IHd4LmNyZWF0ZUNhbnZhc0NvbnRleHQoJ2JvdHRsZUltZycpXHJcbiAgY29uc3QgYm90dGxlVXJsID0gXCJjbG91ZDovL2R4enNib3R0bGUtaXU4Y3guNjQ3OC1keHpzYm90dGxlLWl1OGN4LTEzMDEzMjczMTUvYm90dGxlLnBuZ1wiXHJcbiAgd3guY2xvdWQuZG93bmxvYWRGaWxlKHtcclxuICAgIGZpbGVJRDogYm90dGxlVXJsLFxyXG4gICAgc3VjY2VzczogcmVzID0+e1xyXG4gICAgICBkcmF3QWxsKGNvbnRleHQsIHJlcy50ZW1wRmlsZVBhdGgpXHJcbiAgICB9XHJcbiAgfSlcclxuICAvL+S/neWtmFxyXG4gIGNvbnRleHQuZHJhdyh0cnVlLCBmdW5jdGlvbigpe1xyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICB3eC5jYW52YXNUb1RlbXBGaWxlUGF0aCh7XHJcbiAgICAgICAgY2FudmFzSWQ6IFwiYm90dGxlSW1nXCIsXHJcbiAgICAgICAgcXVhbGl0eTogMSxcclxuICAgICAgICBzdWNjZXNzKHJlcykge1xyXG4gICAgICAgICAgd3guc2F2ZUltYWdlVG9QaG90b3NBbGJ1bSh7XHJcbiAgICAgICAgICAgIGZpbGVQYXRoOiByZXMudGVtcEZpbGVQYXRoLFxyXG4gICAgICAgICAgICBzdWNjZXNzKCkge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5oiQ5Yqf5L+d5a2YXCIpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZhaWwocmVzKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmVyck1zZylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9LCAxMDAwMClcclxuICB9KVxyXG59Il19